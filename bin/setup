#!/usr/bin/env sh

if ! command -v pod > /dev/null; then 
  printf 'Cocoapods not installed.\n'
  exit 1
fi

if ! command -v carthage > /dev/null; then 
  printf 'Carthage not installed.\n'
  exit 1 
fi

if ! command -v docker > /dev/null; then
  printf 'Docker not installed.\n'
  exit 1
fi

if ! command -v docker-compose > /dev/null; then
  printf 'docker-compose not installed.\n'
  exit 1
fi

echo 'ðŸ”¶ Setting up Carthage...\n'

# 1. Setup Carthage 
carthage update 

echo 'âœ… Carthage Setup Completed\n'
echo 'ðŸ”¶ Opening workspace...\n'

# 2. Open Workspace
open PayPalCheckout-Samples-iOS.xcworkspace

echo 'âœ… Workspace Opened\n'
echo 'ðŸ”¶ Running Docker...\n'

# 3. Run local docker container
cd node_checkout && docker-compose up